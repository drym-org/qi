<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;Language Interface</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Qi:<span class="mywbr"> &nbsp;</span> An Embeddable Flow-<wbr></wbr>Oriented Language</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Using_These_Docs.html" class="tocviewlink" data-pltdoc="x">Using These Docs</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Introduction_and_Usage.html" class="tocviewlink" data-pltdoc="x">Introduction and Usage</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Tutorial.html" class="tocviewlink" data-pltdoc="x">Tutorial</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Language Interface</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Qi_Forms.html" class="tocviewlink" data-pltdoc="x">The Qi Language</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="List_Operations.html" class="tocviewlink" data-pltdoc="x">List Operations</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Qi_Macros.html" class="tocviewlink" data-pltdoc="x">Qi Macros</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Field_Guide.html" class="tocviewlink" data-pltdoc="x">Field Guide</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Principles_of_Qi.html" class="tocviewlink" data-pltdoc="x">Principles of Qi</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="When_Should_I_Use_Qi_.html" class="tocviewlink" data-pltdoc="x">When Should I Use Qi?</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Flowing_with_the_Flow.html" class="tocviewlink" data-pltdoc="x">Input Methods</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Language Interface</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="#%28part._.Using_.Qi_from_the_.Host_.Language%29" class="tocviewlink" data-pltdoc="x">Using Qi from the Host Language</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="#%28part._.Using_the_.Host_.Language_from_.Qi%29" class="tocviewlink" data-pltdoc="x">Using the Host Language from Qi</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="#%28part._.Using_.Qi_with_.Another_.D.S.L%29" class="tocviewlink" data-pltdoc="x">Using Qi with Another DSL</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.1<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Qi_from_the_.Host_.Language%29" class="tocsubseclink" data-pltdoc="x">Using Qi from the Host Language</a></td></tr><tr><td><span class="tocsublinknumber">4.1.1<span class="stt">&nbsp;</span></span><a href="#%28part._.Core%29" class="tocsubseclink" data-pltdoc="x">Core</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#9775;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">flow</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">on</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1.2<span class="stt">&nbsp;</span></span><a href="#%28part._.Threading%29" class="tocsubseclink" data-pltdoc="x">Threading</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">~&gt;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e~3e%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">~&gt;&gt;</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1.3<span class="stt">&nbsp;</span></span><a href="#%28part._interface-conditionals%29" class="tocsubseclink" data-pltdoc="x">Conditionals</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">switch</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1.4<span class="stt">&nbsp;</span></span><a href="#%28part._.Lambdas%29" class="tocsubseclink" data-pltdoc="x">Lambdas</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">flow-<wbr></wbr>lambda</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-~ce~bb%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">flow-<wbr></wbr>&#955;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~cf~80%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#960;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">switch-<wbr></wbr>lambda</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-~ce~bb%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">switch-<wbr></wbr>&#955;</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~ce~bb01%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">&#955;01</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.1.5<span class="stt">&nbsp;</span></span><a href="#%28part._.Definitions%29" class="tocsubseclink" data-pltdoc="x">Definitions</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-flow%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>flow</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-switch%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>switch</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.2<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_the_.Host_.Language_from_.Qi%29" class="tocsubseclink" data-pltdoc="x">Using the Host Language from Qi</a></td></tr><tr><td><span class="tocsublinknumber">4.2.1<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Racket_.Values_in_.Qi_.Flows%29" class="tocsubseclink" data-pltdoc="x">Using Racket Values in Qi Flows</a></td></tr><tr><td><span class="tocsublinknumber">4.2.2<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Racket_to_.Define_.Flows%29" class="tocsubseclink" data-pltdoc="x">Using Racket to Define Flows</a></td></tr><tr><td><span class="tocsublinknumber">4.2.3<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Racket_.Macros_as_.Flows%29" class="tocsubseclink" data-pltdoc="x">Using Racket Macros as Flows</a></td></tr><tr><td><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-foreign-syntaxes%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>qi-<wbr></wbr>foreign-<wbr></wbr>syntaxes</span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.3<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Qi_with_.Another_.D.S.L%29" class="tocsubseclink" data-pltdoc="x">Using Qi with Another DSL</a></td></tr><tr><td><span class="tocsublinknumber">4.3.1<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_.Qi_.Directly%29" class="tocsubseclink" data-pltdoc="x">Using Qi Directly</a></td></tr><tr><td><span class="tocsublinknumber">4.3.2<span class="stt">&nbsp;</span></span><a href="#%28part._.Using_a_.Macro_.Bridge%29" class="tocsubseclink" data-pltdoc="x">Using a Macro Bridge</a></td></tr><tr><td><span class="tocsublinknumber">4.3.3<span class="stt">&nbsp;</span></span><a href="#%28part._.Qi_.Dialect_.Interop%29" class="tocsubseclink" data-pltdoc="x">Writing a Qi Dialect</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Tutorial.html" title="backward to &quot;3 Tutorial&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Qi: An Embeddable Flow-Oriented Language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Qi_Forms.html" title="forward to &quot;5 The Qi Language&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div><section class="SsectionLevel2" id="section 4"><h2 class="heading">4<span class="stt">&nbsp;</span><a name="(part._.Language_.Interface)"></a>Language Interface<span class="button-group"><a href="#(part._.Language_.Interface)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h2><p>The most common way to use Qi is via interface macros in a host language such as Racket. Qi may also be used in tandem with other embedded or hosted DSLs.</p><table cellspacing="0" cellpadding="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Qi_from_the_.Host_.Language%29" class="toclink" data-pltdoc="x">4.1<span class="hspace">&nbsp;</span>Using Qi from the Host Language</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Core%29" class="toclink" data-pltdoc="x">4.1.1<span class="hspace">&nbsp;</span>Core</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Threading%29" class="toclink" data-pltdoc="x">4.1.2<span class="hspace">&nbsp;</span>Threading</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._interface-conditionals%29" class="toclink" data-pltdoc="x">4.1.3<span class="hspace">&nbsp;</span>Conditionals</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Lambdas%29" class="toclink" data-pltdoc="x">4.1.4<span class="hspace">&nbsp;</span>Lambdas</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Definitions%29" class="toclink" data-pltdoc="x">4.1.5<span class="hspace">&nbsp;</span>Definitions</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_the_.Host_.Language_from_.Qi%29" class="toclink" data-pltdoc="x">4.2<span class="hspace">&nbsp;</span>Using the Host Language from Qi</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Racket_.Values_in_.Qi_.Flows%29" class="toclink" data-pltdoc="x">4.2.1<span class="hspace">&nbsp;</span>Using Racket Values in Qi Flows</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Racket_to_.Define_.Flows%29" class="toclink" data-pltdoc="x">4.2.2<span class="hspace">&nbsp;</span>Using Racket to Define Flows</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Racket_.Macros_as_.Flows%29" class="toclink" data-pltdoc="x">4.2.3<span class="hspace">&nbsp;</span>Using Racket Macros as Flows</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Qi_with_.Another_.D.S.L%29" class="toclink" data-pltdoc="x">4.3<span class="hspace">&nbsp;</span>Using Qi with Another DSL</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_.Qi_.Directly%29" class="toclink" data-pltdoc="x">4.3.1<span class="hspace">&nbsp;</span>Using Qi Directly</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Using_a_.Macro_.Bridge%29" class="toclink" data-pltdoc="x">4.3.2<span class="hspace">&nbsp;</span>Using a Macro Bridge</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#%28part._.Qi_.Dialect_.Interop%29" class="toclink" data-pltdoc="x">4.3.3<span class="hspace">&nbsp;</span>Writing a Qi Dialect</a></p></td></tr></table><section class="SsectionLevel3" id="section 4.1"><h3 class="heading">4.1<span class="stt">&nbsp;</span><a name="(part._.Using_.Qi_from_the_.Host_.Language)"></a>Using Qi from the Host Language<span class="button-group"><a href="#(part._.Using_.Qi_from_the_.Host_.Language)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>The core entry-point to Qi from the host language is the form <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span>. In addition, other forms such as <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxLink" data-pltdoc="x">on</a></span>, <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxLink" data-pltdoc="x">switch</a></span>, and <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span> build on top of <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> to provide convenient syntax in specialized cases. Together, these forms represent the interface between the host language (e.g. Racket) and Qi.</p><section class="SsectionLevel4" id="section 4.1.1"><h4 class="heading">4.1.1<span class="stt">&nbsp;</span><a name="(part._.Core)"></a>Core<span class="button-group"><a href="#(part._.Core)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._~e2~98~af))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#9775;</a></span></span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._flow))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">flow</a></span></span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Define a <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a> by using the various <a href="Qi_Forms.html" data-pltdoc="x">forms</a> of the Qi language.</div></p><p>This produces a value that is an ordinary function. When invoked with arguments, this function passes those arguments as inputs to the defined flow, producing its outputs as return values. A flow defined in this manner does not name its inputs, and like any function, it only produces output when it is invoked with inputs.</p><p>See also <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxLink" data-pltdoc="x">on</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span>, which are shorthands to invoke the flow with arguments immediately.</p><p>See <a href="Flowing_with_the_Flow.html" data-pltdoc="x">Input Methods</a> for ways to enter the <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> symbol in your editor.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">15</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._positive~3f%29%29" class="RktValLink" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._odd~3f%29%29" class="RktValLink" data-pltdoc="x">odd?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">16</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._on))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">on</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Define and execute a <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a> with the inputs named in advance.</div></p><p>This is a way to pass inputs to a flow that is an alternative to the usual function invocation syntax (i.e. an alternative to simply invoking the flow with arguments). It may be preferable in certain cases, since the inputs are named at the beginning rather than at the end.</p><p>In the respect that it both defines as well as invokes the flow, it has the same relationship to <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> as <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> has to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span>, and can be used in analogous ways.</p><p>Equivalent to <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="stt"> </span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">arg</span><span class="stt"> </span><span class="RktMeta"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span>.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxLink" data-pltdoc="x">on</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._positive~3f%29%29" class="RktValLink" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._odd~3f%29%29" class="RktValLink" data-pltdoc="x">odd?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxLink" data-pltdoc="x">on</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="nobreak">-&gt;</span>string</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"67"</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.1.2"><h4 class="heading">4.1.2<span class="stt">&nbsp;</span><a name="(part._.Threading)"></a>Threading<span class="button-group"><a href="#(part._.Threading)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._~7e~3e))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">~&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._~7e~3e~3e))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e~3e%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">~&gt;&gt;</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">These <span class="emph">Racket</span> forms leverage the identically-named <span class="emph">Qi</span> forms to thread inputs through a sequence of <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flows</span></a>. <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span> threads arguments in the first position by default, while <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;&gt;</a></span> uses the last position, but in either case the positions can instead be explicitly indicated by using <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span> or <span class="RktVar">__</span>.</div></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>In these docs, we&rsquo;ll sometimes refer to the host language as "Racket" for convenience, but it should be understood that Qi may be used with any host language.</p></blockquote></blockquote></blockquote><p>Note that, as there may be any number of input arguments, they must be wrapped in parentheses in order to distinguish them from the flow specification &ndash; <a href="Introduction_and_Usage.html#%28part._.Relationship_to_the_.Threading_.Macro%29" data-pltdoc="x">unlike the usual threading macro</a> where the input is simply the first argument.</p><p>As flows themselves can be nonlinear, these threading forms too support arbitrary arity changes along the way to generating the result.</p><p>In the respect that these both define as well as invoke the flow, they have the same relationship to <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> as <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span> has to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span>, and can be used in analogous ways.</p><p>Equivalent to <span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="stt"> </span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">args</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span>.</p><p>See also: <a href="Introduction_and_Usage.html#%28part._.Relationship_to_the_.Threading_.Macro%29" data-pltdoc="x">Relationship to the Threading Macro</a>.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fmath..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">10</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&lt;</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fmath..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">13</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"abc"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"b"</span><span class="hspace">&nbsp;</span><span class="RktVal">"c"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"a"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"abc"</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">"a"</span><span class="hspace">&nbsp;</span><span class="RktVal">"b"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string-append%29%29" class="RktValLink" data-pltdoc="x">string-append</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"-"</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"a-b"</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.1.3"><h4 class="heading">4.1.3<span class="stt">&nbsp;</span><a name="(part._interface-conditionals)"></a>Conditionals<span class="button-group"><a href="#(part._interface-conditionals)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._switch))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">switch</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">arg</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A predicate-based dispatch form, usable as an alternative to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._cond%29%29" class="RktStxLink" data-pltdoc="x">cond</a></span>, <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span>, and <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/match.html#%28form._%28%28lib._racket%2Fmatch..rkt%29._match%29%29" class="RktStxLink" data-pltdoc="x">match</a></span>.</div></p><p>Each of the <span class="RktVar">predicate</span> and <span class="RktVar">consequent</span> expressions is a <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a>, and they are each typically invoked with <span class="RktVar">arg</span><span class="stt"> </span><span class="RktMeta"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span>, so that the arguments need not be mentioned anywhere in the body of the form.</p><p>This <span class="emph">Racket</span> form leverages the identically-named <span class="emph">Qi</span> form. See <a href="Qi_Forms.html#%28part._.Conditionals%29" data-pltdoc="x">Conditionals</a> for its full syntax and behavior.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxLink" data-pltdoc="x">switch</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._positive~3f%29%29" class="RktValLink" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._odd~3f%29%29" class="RktValLink" data-pltdoc="x">odd?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fmath..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">26</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxLink" data-pltdoc="x">switch</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._~3c%29%29" class="RktValLink" data-pltdoc="x">&lt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._min%29%29" class="RktValLink" data-pltdoc="x">min</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">5</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.1.4"><h4 class="heading">4.1.4<span class="stt">&nbsp;</span><a name="(part._.Lambdas)"></a>Lambdas<span class="button-group"><a href="#(part._.Lambdas)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>These anonymous function forms may be used in cases where you need to explicitly <span class="emph">name</span> the arguments for some reason. Otherwise, in most cases, just use <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> directly instead as it produces a function while avoiding the extraneous layer of bindings.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._flow-lambda))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">flow-lambda</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._flow-~ce~bb))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-~ce~bb%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">flow-&#955;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._~cf~80))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~cf~80%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#960;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similiar to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span> but constrained to the flow language. This is exactly equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktVar">args</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._on%29%29" class="RktStxLink" data-pltdoc="x">on</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">args</span><span class="RktPn">)</span><span class="stt"> </span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span><span class="RktPn">)</span> except that the keywords only introduce bindings, and aren&rsquo;t part of the values that are fed into <a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a>. <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-~ce~bb%29%29" class="RktStxLink" data-pltdoc="x">flow-&#955;</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~cf~80%29%29" class="RktStxLink" data-pltdoc="x">&#960;</a></span> are aliases for <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span>. The present form mainly finds its use internally in <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-flow%29%29" class="RktStxLink" data-pltdoc="x">define-flow</a></span>, and in most cases you should use <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span> directly.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a*</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>4)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>4)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a*</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>(2<span class="stt"> </span>3<span class="stt"> </span>4))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a*</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>(2<span class="stt"> </span>3<span class="stt"> </span>4))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a*</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>2<span class="stt"> </span>(3<span class="stt"> </span>4))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">#:c</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktPn">#:c</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">50</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._switch-lambda))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">switch-lambda</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._switch-~ce~bb))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-~ce~bb%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">switch-&#955;</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._~ce~bb01))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~ce~bb01%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">&#955;01</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">args</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similar to <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span> but constrained to be a flow-based dispatcher. This is exactly equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._lambda%29%29" class="RktStxLink" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktVar">args</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch%29%29" class="RktStxLink" data-pltdoc="x">switch</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktVar">args</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktVar">maybe-divert-clause</span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="stt"> </span><span class="RktVar">consequent</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">else</span><span class="stt"> </span><span class="RktVar">consequent</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span> except that the keywords only introduce bindings, and aren&rsquo;t part of the values that are fed into <a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a>. <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-~ce~bb%29%29" class="RktStxLink" data-pltdoc="x">switch-&#955;</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~ce~bb01%29%29" class="RktStxLink" data-pltdoc="x">&#955;01</a></span> are aliases for <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxLink" data-pltdoc="x">switch-lambda</a></span>.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxLink" data-pltdoc="x">switch-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._memq%29%29" class="RktValLink" data-pltdoc="x">memq</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">yes</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">no</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktPn">#:b</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">any</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'yes</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxLink" data-pltdoc="x">switch-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktPn">#:fx</span><span class="hspace">&nbsp;</span><span class="RktSym">fx</span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym">a*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._memq%29%29" class="RktValLink" data-pltdoc="x">memq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym">1&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">fx</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">no</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktPn">#:fx</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._number-~3estring%29%29" class="RktValLink" data-pltdoc="x">number-&gt;string</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"2"</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxLink" data-pltdoc="x">switch-lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/if.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._and%29%29" class="RktStxLink" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._positive~3f%29%29" class="RktValLink" data-pltdoc="x">positive?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._odd~3f%29%29" class="RktValLink" data-pltdoc="x">odd?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fmath..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._add1%29%29" class="RktValLink" data-pltdoc="x">add1</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">26</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.1.5"><h4 class="heading">4.1.5<span class="stt">&nbsp;</span><a name="(part._.Definitions)"></a>Definitions<span class="button-group"><a href="#(part._.Definitions)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>The following definition forms may be used in place of the usual general-purpose <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> form when defining <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flows</span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._define-flow))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-flow%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-flow</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-flow%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-flow</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">head</span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similiar to the function form of <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> but constrained to the flow language. This is exactly equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="stt"> </span><span class="RktVar">head</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._flow-lambda%29%29" class="RktStxLink" data-pltdoc="x">flow-lambda</a></span><span class="stt"> </span><span class="RktVar">args</span><span class="stt"> </span><a href="Qi_Forms.html#%28tech._floe%29" class="techoutside" data-pltdoc="x"><span class="techinside">floe</span></a><span class="RktPn">)</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._define-switch))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-switch%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-switch</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">name</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-switch%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-switch</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">head</span><span class="hspace">&nbsp;</span><span class="RktVar">args</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">maybe-divert-clause</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktVar">consequent</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similiar to the function form of <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> but constrained to be a (predicate-based) dispatcher. This is exactly equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="stt"> </span><span class="RktVar">head</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._switch-lambda%29%29" class="RktStxLink" data-pltdoc="x">switch-lambda</a></span><span class="stt"> </span><span class="RktVar">args</span><span class="stt"> </span><span class="RktVar">maybe-divert-clause</span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">predicate</span><span class="stt"> </span><span class="RktVar">consequent</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktPn">[</span><span class="RktVar">else</span><span class="stt"> </span><span class="RktVar">consequent</span><span class="stt"> </span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span>.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-switch%29%29" class="RktStxLink" data-pltdoc="x">define-switch</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._abs%29%29" class="RktValLink" data-pltdoc="x">abs</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._negative~3f%29%29" class="RktValLink" data-pltdoc="x">negative?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">else</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29" class="RktValLink" data-pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._abs%29%29" class="RktValLink" data-pltdoc="x">abs</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-3</span></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-5</span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(1<span class="stt"> </span>2<span class="stt"> </span>3<span class="stt"> </span>4<span class="stt"> </span>5)</span></p></td></tr></table></blockquote></div></p><p>The advantage of using these over the general-purpose <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span> form is that, as they express the definition at the appropriate level of abstraction and with the attendant constraints for the type of <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a>, they can be more clear and more robust, minimizing boilerplate while providing guardrails against programmer error.</p></section></section><section class="SsectionLevel3" id="section 4.2"><h3 class="heading">4.2<span class="stt">&nbsp;</span><a name="(part._.Using_the_.Host_.Language_from_.Qi)"></a>Using the Host Language from Qi<span class="button-group"><a href="#(part._.Using_the_.Host_.Language_from_.Qi)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>Arbitrary host language (e.g. Racket) expressions can be used in <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flows</span></a> in one of two core ways. This section describes these two ways and also discusses other considerations regarding use of the host language alongside Qi.</p><section class="SsectionLevel4" id="section 4.2.1"><h4 class="heading">4.2.1<span class="stt">&nbsp;</span><a name="(part._.Using_.Racket_.Values_in_.Qi_.Flows)"></a>Using Racket Values in Qi Flows<span class="button-group"><a href="#(part._.Using_.Racket_.Values_in_.Qi_.Flows)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>The first and most common way is to simply wrap the expression with a <span class="RktSym">gen</span> form while within a flow context. This <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a> generates the <a href="http://pkg-build.racket-lang.org/doc/reference/eval-model.html#%28tech._value%29" class="techoutside" data-pltdoc="x"><span class="techinside">value</span></a> of the expression.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/define.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define%29%29" class="RktStxLink" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~e2~98~af%29%29" class="RktStxLink" data-pltdoc="x">&#9775;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gen</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/pairs.html#%28def._%28%28quote._~23~25kernel%29._list%29%29" class="RktValLink" data-pltdoc="x">list</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(10<span class="stt"> </span>6)</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.2.2"><h4 class="heading">4.2.2<span class="stt">&nbsp;</span><a name="(part._.Using_.Racket_to_.Define_.Flows)"></a>Using Racket to Define Flows<span class="button-group"><a href="#(part._.Using_.Racket_to_.Define_.Flows)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>The second way is if you want to describe a <a href="Principles_of_Qi.html#%28tech._flow%29" class="techoutside" data-pltdoc="x"><span class="techinside">flow</span></a> using the host language instead of Qi. In this case, use the <span class="RktSym">esc</span> form. The wrapped expression in this case <span class="emph">must</span> evaluate to a function, since functions are the only values describable in the host language that can be treated as flows. Note that use of <span class="RktSym">esc</span> is unnecessary for function identifiers since these are <a href="Qi_Forms.html#%28part._.Identifiers%29" data-pltdoc="x">usable as flows directly</a>, and these can even be <a href="Qi_Forms.html#%28part._.Templates_and_.Partial_.Application%29" data-pltdoc="x">partially applied using standard application syntax</a>, optionally with <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span> and <span class="RktVar">__</span> to indicate argument placement. But you may still need <span class="RktSym">esc</span> in the specific case where the identifier collides with a Qi form.</p><p>Finally, bear in mind that if you use <span class="RktSym">esc</span>, the <a href="Principles_of_Qi.html#%28part._.It_s_.Languages_.All_the_.Way_.Down%29" data-pltdoc="x">Qi compiler</a> will not attempt to optimize the resulting flow. Of course, if such a flow occurs within a larger flow, other parts of that containing flow would still be optimized as usual. Yet, as escaped forms are generally not considered in optimizations, the presence of such forms may make it less likely that there would be applicable nonlocal (i.e. involving more than one flow, like <a href="Principles_of_Qi.html#%28part._.Phrases%29" data-pltdoc="x">phrases</a>) optimizations.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-flow%29%29" class="RktStxLink" data-pltdoc="x">define-flow</a></span><span class="hspace">&nbsp;</span><span class="RktSym">add-two</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">esc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~ce~bb%29%29" class="RktStxLink" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">add-two</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">8</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28lib._racket%2Fmath..rkt%29._sqr%29%29" class="RktValLink" data-pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">esc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/lambda.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._~ce~bb%29%29" class="RktStxLink" data-pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">14</span></p></td></tr></table></blockquote></div></p></section><section class="SsectionLevel4" id="section 4.2.3"><h4 class="heading">4.2.3<span class="stt">&nbsp;</span><a name="(part._.Using_.Racket_.Macros_as_.Flows)"></a>Using Racket Macros as Flows<span class="button-group"><a href="#(part._.Using_.Racket_.Macros_as_.Flows)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>Flows are expected to be <a href="Principles_of_Qi.html#%28part._.What_is_a_.Flow_%29" data-pltdoc="x">functions</a>, and so you cannot naively use a macro as a flow. But there are many ways in which you can. If you&rsquo;d just like to use such a macro in a one-off manner, see <a href="Field_Guide.html#%28part._.Converting_a_.Macro_to_a_.Flow%29" data-pltdoc="x">Converting a Macro to a Flow</a> for an ad hoc way to do this. But a simpler and more complete way in many cases is to first register the macro (or any number of such macros) using <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-foreign-syntaxes%29%29" class="RktStxLink" data-pltdoc="x">define-qi-foreign-syntaxes</a></span> prior to use.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._qi/main..rkt)._define-qi-foreign-syntaxes))"></a><span title="Provided from: qi | Package: qi-lib"><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-foreign-syntaxes%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-qi-foreign-syntaxes</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">form</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This form allows you to register "foreign macros" for use with Qi. These could be Racket macros, or the forms of another DSL. By simply registering such forms by name using this form, you can for the most part use them just as if they were functions, except that the catch-all template <span class="RktVar">__</span> isn&rsquo;t supported for such macros.</div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._define-syntax-rule%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-rule</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">double-me</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fmisc..rkt%29._define-syntax-rule%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-rule</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtract-two</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-foreign-syntaxes%29%29" class="RktStxLink" data-pltdoc="x">define-qi-foreign-syntaxes</a></span><span class="hspace">&nbsp;</span><span class="RktSym">double-me</span><span class="hspace">&nbsp;</span><span class="RktSym">subtract-two</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtract-two</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">double-me</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtract-two</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">double-me</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes"><span class="nobreak">-2</span></span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._~7e~3e%29%29" class="RktStxLink" data-pltdoc="x">~&gt;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVal">5</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtract-two</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">double-me</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">2</span></p></td></tr></table></blockquote></div></p><p>By doing this, you can thread multiple values through such syntaxes in the same manner as functions. The catch-all template <span class="RktVar">__</span> isn&rsquo;t supported though, since macros (unlike functions) require all the "arguments" to be supplied syntactically at compile time. So while any number of arguments may be supplied to such macros, it must be a <span class="emph">specific</span> rather than an <span class="emph">arbitrary</span> number of them, which may be indicated syntactically via <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span> to indicate individual expected arguments and their positions.</p><p>Note that for a foreign macro used in identifier form (such as <span class="RktSym">double-me</span> in the example above), it assumes a <span class="emph">single</span> argument. This is different from function identifiers where they receive as many values as may happen to be flowing at runtime. With macros, as we saw, we cannot provide them an arbitrary number of arguments. If more than one argument is anticipated, explicitly indicate them using a <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29.__%29%29" class="RktStxLink" data-pltdoc="x">_</a></span> template.</p><p>Finally, as macros "registered" in this way result in the implicit creation of <a href="Qi_Macros.html" data-pltdoc="x">Qi macros</a> corresponding to each foreign macro, if you&rsquo;d like to use these forms from another module, you&rsquo;ll need to provide them just like any other Qi macro, i.e. via <span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._provide%29%29" class="RktStxLink" data-pltdoc="x">provide</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._for-space%29%29" class="RktStxLink" data-pltdoc="x">for-space</a></span><span class="stt"> </span><span class="RktSym">qi</span><span class="stt"> </span><span class="RktMeta"><a href="http://pkg-build.racket-lang.org/doc/reference/stx-patterns.html#%28form._%28%28lib._racket%2Fprivate%2Fstxcase-scheme..rkt%29._......%29%29" class="RktStxLink" data-pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span>.</p></section></section><section class="SsectionLevel3" id="section 4.3"><h3 class="heading">4.3<span class="stt">&nbsp;</span><a name="(part._.Using_.Qi_with_.Another_.D.S.L)"></a>Using Qi with Another DSL<span class="button-group"><a href="#(part._.Using_.Qi_with_.Another_.D.S.L)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h3><p>Qi may also be used in tandem with other DSLs in a few different ways &ndash; either directly, if the DSL is implemented simply as functions without custom syntax, or via a one-to-one macro "bridge" between the two languages (if the interface between the languages is small), or potentially by implementing the DSL itself as a Qi dialect (if the languages interact extensively).</p><section class="SsectionLevel4" id="section 4.3.1"><h4 class="heading">4.3.1<span class="stt">&nbsp;</span><a name="(part._.Using_.Qi_.Directly)"></a>Using Qi Directly<span class="button-group"><a href="#(part._.Using_.Qi_.Directly)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>If the forms of the DSL are callable, i.e. if they are functions, then you can just use Qi with them the same way as with any other function.</p></section><section class="SsectionLevel4" id="section 4.3.2"><h4 class="heading">4.3.2<span class="stt">&nbsp;</span><a name="(part._.Using_a_.Macro_.Bridge)"></a>Using a Macro Bridge<span class="button-group"><a href="#(part._.Using_a_.Macro_.Bridge)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>See <a href="Field_Guide.html#%28part._.Converting_a_.Macro_to_a_.Flow%29" data-pltdoc="x">Converting a Macro to a Flow</a>.</p><p>Using the macro bridge approach, you would need to write a corresponding Qi macro for every form of your DSL that interacts with Qi (or use <span class="RktSym"><a href="#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-foreign-syntaxes%29%29" class="RktStxLink" data-pltdoc="x">define-qi-foreign-syntaxes</a></span> to do this for you). If this interface between the two languages is large enough, and their use together frequent enough, this approach too may prove cumbersome. In such cases, it may be best to implement the DSL itself as a <a href="#%28part._.Qi_.Dialect_.Interop%29" data-pltdoc="x">dialect of Qi</a>.</p></section><section class="SsectionLevel4" id="section 4.3.3"><h4 class="heading">4.3.3<span class="stt">&nbsp;</span><a name="(part._.Qi_.Dialect_.Interop)"></a>Writing a Qi Dialect<span class="button-group"><a href="#(part._.Qi_.Dialect_.Interop)" class="heading-anchor" title="Link to here">🔗</a><span style="visibility: hidden"> </span></span></h4><p>The problem with the <a href="#%28part._.Using_a_.Macro_.Bridge%29" data-pltdoc="x">macro bridge approach</a> is that all paths between the two languages must go through a level of indirection in the host language. That is, the only way for Qi and the other DSL to interact is via Racket as an everpresent intermediary.</p><p>To get around this, a final possibility to consider is to translate the DSL itself so that it&rsquo;s implemented in Qi rather than Racket. That is, instead of being specified using Racket macros via e.g. <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/syntax/Defining_Simple_Macros.html#%28form._%28%28lib._syntax%2Fparse%2Fdefine..rkt%29._define-syntax-parse-rule%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-parse-rule</a></span> and <span class="RktSym"><a href="http://pkg-build.racket-lang.org/doc/syntax/Defining_Simple_Macros.html#%28form._%28%28lib._syntax%2Fparse%2Fdefine..rkt%29._define-syntax-parser%29%29" class="RktStxLink" data-pltdoc="x">define-syntax-parser</a></span>, it would rather be defined using <span class="RktSym"><a href="Qi_Macros.html#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-syntax-rule%29%29" class="RktStxLink" data-pltdoc="x">define-qi-syntax-rule</a></span> and <span class="RktSym"><a href="Qi_Macros.html#%28form._%28%28lib._qi%2Fmain..rkt%29._define-qi-syntax-parser%29%29" class="RktStxLink" data-pltdoc="x">define-qi-syntax-parser</a></span> so that the language expands to Qi rather than Racket (directly). This would allow your language to be used with Qi seamlessly since it would now be a dialect of Qi.</p><p>There are many kinds of languages that you could write in Qi. See <a href="Qi_Macros.html#%28part._.Writing_.Languages_in_.Qi%29" data-pltdoc="x">Writing Languages in Qi</a> for a view into the possibilities here, and what may be right for your language.</p></section></section></section><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Tutorial.html" title="backward to &quot;3 Tutorial&quot;" data-pltdoc="x" rel="prev">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Qi: An Embeddable Flow-Oriented Language&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Qi_Forms.html" title="forward to &quot;5 The Qi Language&quot;" data-pltdoc="x" rel="next">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>